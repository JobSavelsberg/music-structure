(function(t){function e(e){for(var a,r,c=e[0],o=e[1],u=e[2],h=0,d=[];h<c.length;h++)r=c[h],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);l&&l(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,c=1;c<n.length;c++){var o=n[c];0!==s[o]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},s={app:0},i=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var c=this["webpackJsonp"]=this["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var u=0;u<c.length;u++)e(c[u]);var l=o;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var a=n("85ec"),s=n.n(a);s.a},"1aec":function(t,e,n){"use strict";var a=n("d917"),s=n.n(a);s.a},"2f67":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{id:"app",dark:!0}},[n("router-view")],1)},i=[],r={name:"App",components:{},data:function(){return{}},mounted:function(){var t=document.getElementsByTagName("html")[0];t.style.overflowY="auto"},destroyed:function(){var t=document.getElementsByTagName("html")[0];t.style.overflowY=null}},c=r,o=(n("034f"),n("2877")),u=n("6544"),l=n.n(u),h=n("7496"),d=Object(o["a"])(c,s,i,!1,null,null,null),f=d.exports;l()(d,{VApp:h["a"]});var m=n("8c4f"),g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("v-app-bar",{attrs:{dark:""}},[n("v-toolbar-title",[t._v("Music Structure Visualizer")]),n("v-spacer"),n("form",{on:{submit:function(e){return e.preventDefault(),t.search(e)}}},[n("v-text-field",{attrs:{"hide-details":"","append-icon":"mdi-magnify","single-line":"",rounded:"",dense:"",filled:""},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}})],1),n("div",{staticClass:"volumeSlider"},[n("v-container",[n("v-slider",{attrs:{"prepend-icon":t.getVolumeIcon(t.volume),min:0,max:1,step:.02},on:{"click:prepend":t.clickVolume},model:{value:t.volume,callback:function(e){t.volume=e},expression:"volume"}})],1)],1),n("v-btn",{attrs:{icon:""}},[n("v-icon",[t._v("mdi-heart")])],1),n("v-btn",{attrs:{icon:""}},[n("v-icon",[t._v("mdi-dots-vertical")])],1)],1),n("TrackSelector",{attrs:{tracks:t.trackList,"album-size":120}}),n("Player",{attrs:{padding:t.padding}}),n("Visualization",{attrs:{padding:t.padding}})],1)},p=[],v=(n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-slide-group",{staticClass:"pt-2",attrs:{"center-active":"",mandatory:""},nativeOn:{scroll:function(e){return t.onScroll(e)}},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},t._l(t.tracks,(function(e,a){return n("v-slide-item",{key:a,staticClass:"mx-2 my-1",scopedSlots:t._u([{key:"default",fn:function(a){var s=a.active,i=a.toggle;return[n("Album",{attrs:{album:e.trackData,imgSize:s?1.5*t.albumSize:t.albumSize,active:s},on:{clicked:i}})]}}],null,!0)})})),1)],1)}),y=[],k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{class:t.active?"elevation-3":"elevation-0",style:t.cardStyle},[n("div",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"track",on:{click:t.clicked}},[n("v-img",{attrs:{height:t.imgSize,width:t.imgSize,src:t.album.album.images[t.imgIndex].url}}),n("v-card-text",{staticClass:"pl-2 py-0 pt-1 ml-0 my-0"},[n("div",{staticClass:"text-subtitle-2 text--primary text-truncate "},[t._v(t._s(t.album.name))])])],1),n("v-card-actions",{staticClass:"pl-0 py-0 ml-0 my-0"},[n("v-btn",{staticClass:"artistButton",attrs:{text:"",color:"grey",small:""}},[n("span",{staticClass:"artistButtonText text-caption text-truncate",style:{"max-width":this.imgSize-12+"px"}},[t._v(" "+t._s(t.album.artists[0].name)+" ")])])],1)],1)},b=[],w={props:["album","imgSize","active"],data:function(){return{}},mounted:function(){},computed:{imgIndex:function(){return this.size<=this.album.album.images[2].height?2:this.size<=this.album.album.images[1].height?1:0},cardStyle:function(){return{width:this.imgSize+"px",height:this.imgSize+55+"px"}}},methods:{clicked:function(){this.$emit("clicked")}}},S=w,x=(n("8ade"),n("8336")),C=n("b0af"),j=n("99d9"),O=n("adda"),T=n("269a"),_=n.n(T),V=n("5607"),R=Object(o["a"])(S,k,b,!1,null,null,null),M=R.exports;l()(R,{VBtn:x["a"],VCard:C["a"],VCardActions:j["a"],VCardText:j["c"],VImg:O["a"]}),_()(R,{Ripple:V["a"]});n("4160"),n("a630"),n("4ec9"),n("d3b7"),n("ac1f"),n("3ca3"),n("841c"),n("159b"),n("ddb0");var P,E,A=n("a34a"),D=n.n(A),F=(n("96cf"),n("1da1")),$=n("be8d"),I=(n("25f0"),n("bc3a")),L=n.n(I),z="https://music-structure.herokuapp.com/api",B=L.a.create({baseURL:z,withCredentials:!1});function W(t){return H.apply(this,arguments)}function H(){return H=Object(F["a"])(D.a.mark((function t(e){return D.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,B.post("spotify/token",{code:e}).then((function(t){P=t.data.access_token,window.sessionStorage.setItem("token",P),t.data.expires_in,window.sessionStorage.setItem("tokenTimestamp",(new Date).getTime().toString()),E=t.data.expires_in,window.sessionStorage.setItem("refreshToken",E)})).catch((function(t){console.log(t)}));case 2:case"end":return t.stop()}}),t)}))),H.apply(this,arguments)}function N(){if(void 0===P){var t=window.sessionStorage.getItem("token");window.sessionStorage.getItem("tokenTimestamp"),window.sessionStorage.getItem("refreshToken");return!!t&&(P=t,!0)}return!0}n("99af"),n("cb29"),n("d81d");var G=n("2909"),q=n("d4ec"),U=n("bee2"),Q=n("ade3"),X=n("3835"),J=(n("5ce8"),n("5698")),Y=[0,7,2,9,4,11,6,1,8,3,10,5],K=J.scaleLinear().domain([0,1/12,2/12,2.8/12,3.8/12,4.3/12,5.3/12,6.8/12,8/12,8.8/12,.775,.875,1]).interpolate(J.interpolateHcl).range([J.rgb("#FE0000"),J.rgb("#FF7300"),J.rgb("#FFAA01"),J.rgb("#FFD300"),J.rgb("#FFFF01"),J.rgb("#9FEE00"),J.rgb("#01CC00"),J.rgb("#009899"),J.rgb("#1241AB"),J.rgb("#3914B1"),J.rgb("#7209AC"),J.rgb("#CD0174"),J.rgb("#FE0000")]);Math.PI,Math.PI;var Z=2*Math.PI,tt=3*Math.PI/2;function et(t){for(var e=0,n=0,a=0,s=0;s<12;s++){var i=-Y[s]/12*Z+tt,r=t[s];a+=r/12,e+=r*Math.cos(i),n+=r*Math.sin(i)}var c=(Math.atan2(e,n)+Math.PI)/Z,o=Math.sqrt(e*e+n*n);return[c,o,a]}function nt(t){var e=et(t),n=Object(X["a"])(e,3),a=n[0],s=n[1],i=n[2],r=J.hsl(K(a)),c=Math.min(3*s/(12*i),1);return r.s=c,r.hex()}function at(t){var e=Math.max(0,60+t)/60;return e*e}var st=function(){function t(e){Object(q["a"])(this,t),Object(Q["a"])(this,"segment",null),Object(Q["a"])(this,"start",0),Object(Q["a"])(this,"duration",0),Object(Q["a"])(this,"loudness_start",0),Object(Q["a"])(this,"loudness_max_time",0),Object(Q["a"])(this,"loudness_max",0),Object(Q["a"])(this,"loudness_end",0),Object(Q["a"])(this,"pitches",[]),Object(Q["a"])(this,"timbres",[]),Object(Q["a"])(this,"timbresScaled",[]),Object(Q["a"])(this,"cluster",-1),Object(Q["a"])(this,"tsneCoord",[0,0]),Object(Q["a"])(this,"tonalityAngle",0),Object(Q["a"])(this,"tonalityRadius",0),Object(Q["a"])(this,"tonalityEnergy",0),Object(Q["a"])(this,"percussiony",0),this.segment=e,this.start=e.start,this.duration=e.duration,this.loudness_start=e.loudness_start,this.loudness_max=e.loudness_max,this.loudness_max_time=e.loudness_max_time,this.loudness_end=e.loudness_end}return Object(U["a"])(t,[{key:"processPitch",value:function(t){var e=this;this.segment.pitches.forEach((function(t,n){e.pitches.push(t)}));var n=et(this.pitches),a=Object(X["a"])(n,3);this.tonalityAngle=a[0],this.tonalityRadius=a[1],this.tonalityEnergy=a[2];var s=.2,i=.5,r=this.duration<s?1:i-(this.duration-.15);this.percussiony=Math.min(1,(1-this.tonalityRadius)*this.tonalityEnergy*2)*r}},{key:"processPitchSmooth",value:function(t,e){for(var n=0;n<this.pitches.length;n++)this.pitches[n]=(1-this.percussiony)*this.pitches[n]+this.percussiony*(t.pitches[n]+e.pitches[n])/2}},{key:"processTimbre",value:function(t,e,n,a){var s=this;this.segment.timbre.forEach((function(t,e){s.timbres.push(t/a)})),this.segment.timbre.forEach((function(t,e){s.timbresScaled.push(t/n[e])}))}},{key:"getPitches",value:function(){return this.pitches}},{key:"getTimbres",value:function(){return this.timbres}},{key:"getDuration",value:function(){return this.duration_ms}},{key:"getStart",value:function(){return this.start}},{key:"getOriginalTimbres",value:function(){return this.segment.timbre}},{key:"getFeatures",value:function(){return this.pitches.concat(this.timbres)}},{key:"setCluster",value:function(t){this.cluster=t}},{key:"setTSNECoord",value:function(t){this.tsneCoord=t}},{key:"getTonalEnergy",value:function(){return this.tonalityEnergy}},{key:"getTonalAngle",value:function(){return this.tonalityAngle}},{key:"getLoudnessFeatures",value:function(){return[at(this.loudness_start),at(this.loudness_max),this.loudness_max_time,at(this.loudness_end)]}}]),t}();function it(t,e){return Math.sqrt(rt(t,e))}function rt(t,e){for(var n=0,a=0;a<t.length;a++){var s=t[a]-e[a];n+=s*s}return n}n("fb6a"),n("a12f");var ct=n("929f"),ot=function(){return new Worker(n.p+"js/tsneWorker.2a61cec0.worker.js")},ut=new ot,lt=new ct["a"](ut),ht=function(t){return lt.postMessage({type:"message",message:t})},dt=function(t){return lt.register(t)},ft=function(){ut.terminate(),ut=new ot,lt=new ct["a"](ut)},mt={send:ht,receive:dt,terminate:ft},gt=function(){return new Worker(n.p+"js/ssmWorker.2d1d5834.worker.js")},pt=new gt,vt=new ct["a"](pt),yt=function(t){return vt.postMessage({type:"message",message:t})},kt=function(t){return vt.register(t)},bt=function(){pt.terminate(),pt=new gt,vt=new ct["a"](pt)},wt={send:yt,receive:kt,terminate:bt},St=function(){return new Worker(n.p+"js/clusterWorker.82c7eacd.worker.js")},xt=new St,Ct=new ct["a"](xt),jt=function(t){return Ct.postMessage({type:"message",message:t})},Ot=function(t){return Ct.register(t)},Tt=function(){xt.terminate(),xt=new St,Ct=new ct["a"](xt)},_t={send:jt,receive:Ot,terminate:Tt},Vt=(n("a434"),n("2f62"));a["a"].use(Vt["a"]);var Rt=new Vt["a"].Store({state:{user:Object,trackList:[],selectedIndex:-1,seeker:0,playerState:null,loadingTrack:!0,playerReady:!1,playing:!1,tsneReady:!1,ssmReady:!1,clusterReady:!1},mutations:{setSeeker:function(t,e){t.seeker=e},setUser:function(t,e){console.log("setting user to",e),t.user=e},setPlayerState:function(t,e){t.playerState=e},loadingTrack:function(t,e){t.loadingTrack=e},playerReady:function(t,e){t.playerReady=e},addToTrackList:function(t,e){t.trackList.push(e)},addToTrackListIndex:function(t,e,n){t.trackList.splice(e,0,n)},addToTrackListFront:function(t,e){t.trackList.unshift(e)},clearTrackList:function(t){t.trackList=[]},setSelectedIndex:function(t,e){t.selectedIndex=e},setPlaying:function(t,e){t.playing=e},incrementSeeker:function(t,e){t.seeker+=e},tsneReady:function(t,e){t.tsneReady=e},clusterReady:function(t,e){t.clusterReady=e},ssmReady:function(t,e){t.ssmReady=e}},actions:{},getters:{seeker:function(t){return t.seeker},selectedIndex:function(t){return t.selectedIndex},selectedTrack:function(t){return t.trackList[t.selectedIndex]},user:function(t){return t.user},track:function(t,e){return t.trackList[e]},trackList:function(t){return t.trackList},playerState:function(t){return t.playerState},playing:function(t){return t.playing},tsneReady:function(t){return t.tsneReady},clusterReady:function(t){return t.clusterReady},ssmReady:function(t){return t.ssmReady}},modules:{}}),Mt=1.7,Pt=10,Et=function(){function t(e){Object(q["a"])(this,t),Object(Q["a"])(this,"trackData",null),Object(Q["a"])(this,"analysisData",null),Object(Q["a"])(this,"segmentObjects",[]),Object(Q["a"])(this,"ssm",null),Object(Q["a"])(this,"timbreMax",new Array(12).fill(0)),Object(Q["a"])(this,"timbreMin",new Array(12).fill(0)),Object(Q["a"])(this,"timbreBiggest",new Array(12).fill(0)),Object(Q["a"])(this,"timbreTotalBiggest",0),Object(Q["a"])(this,"pitchFeatures",[]),Object(Q["a"])(this,"timbreFeatures",[]),Object(Q["a"])(this,"loudnessFeatures",[]),Object(Q["a"])(this,"tonalEnergyFeatures",[]),Object(Q["a"])(this,"tonalRadiusFeatures",[]),Object(Q["a"])(this,"tonalAngleFeatures",[]),Object(Q["a"])(this,"features",[]),Object(Q["a"])(this,"processed",!1),Object(Q["a"])(this,"clusters",new Array(Pt).fill([])),this.trackData=e}return Object(U["a"])(t,[{key:"process",value:function(){this.createSegmentObjects(),this.calculateMaxMin(),this.preprocesSegments(),this.tsne(),this.cluster(),this.calculateSSM(),this.processed=!0}},{key:"createSegmentObjects",value:function(){var t=this;console.log("Creating segmentObjects"),this.analysisData.segments.forEach((function(e){t.segmentObjects.push(new st(e))})),console.log("Created segmentObjects")}},{key:"calculateMaxMin",value:function(){var t=this;this.getSegments().forEach((function(e,n){for(var a=0;a<12;a++)t.timbreMax[a]=Math.max(t.timbreMax[a],e.getOriginalTimbres()[a]),t.timbreMin[a]=Math.min(t.timbreMin[a],e.getOriginalTimbres()[a])}));for(var e=0;e<12;e++)this.timbreBiggest[e]=Math.max(Math.abs(this.timbreMax[e]),Math.abs(this.timbreMin[e])),this.timbreTotalBiggest=Math.max(this.timbreTotalBiggest,this.timbreBiggest[e])}},{key:"preprocesSegments",value:function(){var t=this;this.segmentObjects.forEach((function(e,n){e.processPitch(Mt),e.processTimbre(t.timbreMin,t.timbreMax,t.timbreBiggest,t.timbreTotalBiggest),t.pitchFeatures.push(e.pitches),t.timbreFeatures.push(e.timbres),t.tonalEnergyFeatures.push(e.tonalityEnergy),t.tonalRadiusFeatures.push(e.tonalityRadius),t.tonalAngleFeatures.push(e.tonalityAngle),t.loudnessFeatures.push(e.getLoudnessFeatures())}));for(var e=0;e<this.segmentObjects.length;e++)e>0&&e<this.segmentObjects.length-1&&this.segmentObjects[e].processPitchSmooth(this.segmentObjects[e-1],this.segmentObjects[e+1]),this.features.push([].concat(Object(G["a"])(this.timbreFeatures[e]),[this.tonalEnergyFeatures[e],this.tonalRadiusFeatures[e]],Object(G["a"])(this.loudnessFeatures[e])))}},{key:"calculateSSM",value:function(){console.log("starting SSMWorker"),Rt.commit("ssmReady",!1),wt.terminate();var t=this;wt.send({segmentObjects:this.segmentObjects}).then((function(e){t.ssm=e,Rt.commit("ssmReady",!0),console.log("ssm Done")}))}},{key:"cluster",value:function(){var t=this;console.log("starting Clusterworker"),_t.terminate(),_t.send({features:this.features,minK:2,maxK:10,tries:4}).then((function(e){t.updateClusters(e),console.log("clustering done")}))}},{key:"updateClusters",value:function(t){var e=this;Rt.commit("clusterReady",!1),t.forEach((function(t,n){e.segmentObjects[n].setCluster(t),e.clusters[t].push(e.segmentObjects[n])})),window.setTimeout(Rt.commit("clusterReady",!0),1)}},{key:"tsne",value:function(){var t=this;console.log("starting tsneWorker"),mt.terminate(),mt.send({features:this.features}).then((function(e){t.updateTSNECoords(e)})),mt.receive((function(e){t.updateTSNECoords(e)}))}},{key:"updateTSNECoords",value:function(t){Rt.commit("tsneReady",!1);for(var e=0;e<this.segmentObjects.length;e++)this.segmentObjects[e].setTSNECoord(t[e]);window.setTimeout(Rt.commit("tsneReady",!0),1)}},{key:"getClosestSegment",value:function(t){var e=1/0,n=null;return this.segmentObjects.forEach((function(a){var s=it(t,a.tsneCoord);s<e&&(e=s,n=a)})),n}}]),Object(U["a"])(t,[{key:"toJSON",value:function(){return{trackData:this.trackData,analysisData:this.analysisData}}},{key:"getId",value:function(){return this.trackData.id}},{key:"hasAnalysis",value:function(){return null!==this.analysisData&&this.segmentObjects.length>0}},{key:"getAnalysis",value:function(){return this.analysisData}},{key:"setAnalysis",value:function(t){this.processed||(this.analysisData=t,console.log("processing"),this.process(),console.log("processed"))}},{key:"getName",value:function(){return this.trackData.name}},{key:"getArtist",value:function(){return this.trackData.artist}},{key:"getUri",value:function(){return this.trackData.uri}},{key:"getSegments",value:function(){return this.segmentObjects}},{key:"getSegment",value:function(t){return this.segmentObjects[t]}},{key:"getSSM",value:function(){return this.ssm}},{key:"getSSMValue",value:function(t,e){return this.ssm[t][e]}},{key:"getBars",value:function(){return this.analysisData.bars}},{key:"getBeats",value:function(){return this.analysisData.beats}},{key:"getTatums",value:function(){return this.analysisData.tatums}},{key:"getProcessedPitch",value:function(t){return this.segmentObjects[t].getPitches()}},{key:"getProcessedPitches",value:function(){return this.segmentObjects.map((function(t){return t.getPitches()}))}},{key:"getProcessedTimbre",value:function(t){return this.segmentObjects[t].getTimbres()}},{key:"getProcessedTimbres",value:function(){return this.segmentObjects.map((function(t){return t.getTimbres()}))}},{key:"getAnalysisDuration",value:function(){return this.analysisData.track.duration}}],[{key:"createWithAnalysis",value:function(e,n){var a=new t(e);return a.setAnalysis(n),a}},{key:"fromJSON",value:function(t){return this.createWithAnalysis(t.trackData,t.analysisData)}}]),t}(),At=n("5698"),Dt=new $,Ft=new Map;function $t(){return It.apply(this,arguments)}function It(){return It=Object(F["a"])(D.a.mark((function t(){return D.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("Got tracks from local storage: ",Ft),Dt.setAccessToken(P),Dt.getMe().then((function(t){Rt.commit("setUser",t)})).catch((function(t){Cn.push("/")})),Dt.getMyTopTracks({limit:50,offset:0}).then((function(t){Bt(t.items,!1),Lt(0)})).catch((function(t){return console.log(t)}));case 4:case"end":return t.stop()}}),t)}))),It.apply(this,arguments)}function Lt(t){return zt.apply(this,arguments)}function zt(){return zt=Object(F["a"])(D.a.mark((function t(e){return D.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return Rt.commit("loadingTrack",!0),Rt.commit("tsneReady",!1),Rt.commit("clusterReady",!1),Rt.commit("ssmReady",!1),t.abrupt("return",Wt(Rt.getters.trackList[e]).then((function(){console.log("Getting analysis and everything done, now setting selected index"),Rt.commit("loadingTrack",!1),Rt.commit("setSelectedIndex",e)})));case 5:case"end":return t.stop()}}),t)}))),zt.apply(this,arguments)}function Bt(t,e){var n=Rt.getters.selectedTrack;Rt.commit("clearTrackList"),t.forEach((function(t){if(Ft.has(t.id))Rt.commit("addToTrackList",Ft.get(t.id));else{var e=new Et(t);Ft.set(t.id,e),Rt.commit("addToTrackList",e)}})),e?(Rt.commit("addToTrackListFront",n),Rt.commit("setSelectedIndex",0)):Lt(0)}function Wt(t){return Ht.apply(this,arguments)}function Ht(){return Ht=Object(F["a"])(D.a.mark((function t(e){return D.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.hasAnalysis()){t.next=2;break}return t.abrupt("return",e.getAnalysis());case 2:return t.abrupt("return",Dt.getAudioAnalysisForTrack(e.getId()).then((function(t){console.log("Got analysis from api"),e.setAnalysis(t),console.log("Track has done everything with analysis")})).catch((function(t){console.log(t)})));case 3:case"end":return t.stop()}}),t)}))),Ht.apply(this,arguments)}function Nt(t){return Gt.apply(this,arguments)}function Gt(){return Gt=Object(F["a"])(D.a.mark((function t(e){return D.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:Dt.search(e,["track"]).then((function(t){Bt(t.tracks.items,!0)})).catch((function(t){console.log(t)}));case 1:case"end":return t.stop()}}),t)}))),Gt.apply(this,arguments)}var qt={name:"TrackSelector",props:["tracks","albumSize"],components:{Album:M},data:function(){return{selected:0}},computed:{selectedFromStore:function(){return this.$store.getters.selectedIndex}},watch:{selected:"selectedChanged",selectedFromStore:"selectedFromStoreChanged"},mounted:function(){},methods:{selectedChanged:function(t,e){Lt(t)},selectedFromStoreChanged:function(t,e){this.selected=t}}},Ut=qt,Qt=n("7efd"),Xt=n("9dbe"),Jt=Object(o["a"])(Ut,v,y,!1,null,null,null),Yt=Jt.exports;l()(Jt,{VSlideGroup:Qt["a"],VSlideItem:Xt["a"]});var Kt,Zt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"d-flex pa-2"},[n("v-row",[n("v-layout",{staticClass:"ml-10"},[n("v-switch",{staticClass:"mx-5",attrs:{label:"Raw Pitch Data","hide-details":""},model:{value:t.canvasVis.rawPitch.draw,callback:function(e){t.$set(t.canvasVis.rawPitch,"draw",e)},expression:"canvasVis.rawPitch.draw"}}),n("v-switch",{staticClass:"mx-5",attrs:{label:"Raw Timbre Data","hide-details":""},model:{value:t.canvasVis.rawTimbre.draw,callback:function(e){t.$set(t.canvasVis.rawTimbre,"draw",e)},expression:"canvasVis.rawTimbre.draw"}}),n("v-switch",{staticClass:"mx-5",attrs:{label:"Rhythm Data","hide-details":""},model:{value:t.canvasVis.rawRhythm.draw,callback:function(e){t.$set(t.canvasVis.rawRhythm,"draw",e)},expression:"canvasVis.rawRhythm.draw"}}),n("v-switch",{staticClass:"mx-5",attrs:{label:"Tonality","hide-details":""},model:{value:t.canvasVis.tonality.draw,callback:function(e){t.$set(t.canvasVis.tonality,"draw",e)},expression:"canvasVis.tonality.draw"}}),n("v-switch",{staticClass:"mx-5",attrs:{label:"Similarity Matrix","hide-details":""},model:{value:t.canvasVis.ssm.draw,callback:function(e){t.$set(t.canvasVis.ssm,"draw",e)},expression:"canvasVis.ssm.draw"}})],1),n("v-spacer"),n("v-btn",{staticClass:"mr-10",attrs:{color:"primary",fab:"",dark:"",small:""},on:{click:t.zoom}},[n("v-icon",[t._v("mdi-magnify-plus-outline")])],1)],1)],1),n("div",{staticClass:"vis",on:{click:t.clickedVis}},[t.loadingTrack?t._e():n("svg",{staticClass:"visSeeker"},[n("rect",{attrs:{x:this.zoomed?this.padding+this.canvasWidth/2:t.padding+this.seeker/1e3*t.scale-1,y:0,width:2,height:t.canvasHeight,fill:"#ffffff",opacity:.5}})]),n("canvas",{directives:[{name:"show",rawName:"v-show",value:!t.loadingTrack,expression:"!loadingTrack"}],ref:"visCanvas",staticClass:"visCanvas pa-0 ma-0",attrs:{id:"visCanvas"}}),t.loadingTrack?t._e():n("svg",{staticClass:"svgContainer"},[t.drawClusters?n("g",t._l(t.segments,(function(e,a){return n("rect",{key:a,attrs:{x:t.padding+e.start*t.scale,y:10*e.cluster,width:e.duration*t.scale,height:10,fill:t.clusterColor(e.cluster)},on:{click:function(n){return t.clickedCluster(e.cluster,e)}}})})),0):t._e()]),!t.loadingTrack&&t.$store.state.tsneReady?n("svg",{staticClass:"tsneContainer",style:"height: "+(t.tsneSize+t.padding)+"px; left: "+t.padding,on:{click:t.clickedTSNE}},t._l(t.segments,(function(e,a){return n("circle",{key:a,class:t.playingSegment(e)?"segmentCirclePlaying":"segmentCircle",attrs:{r:(2+5*Math.min(2,e.duration))*(t.playingSegment(e)?3:1),cx:(e.tsneCoord[0]+1)*t.tsneSize/2,cy:(e.tsneCoord[1]+1)*t.tsneSize/2,fill:t.playingSegment(e)?"white":t.clusterColor(e.cluster)},on:{click:function(n){return t.clickedSegment(e)}}})})),0):t._e()])])},te=[],ee=(n("4fad"),null),ne=!1,ae="",se=0,ie=null;function re(t,e){return ce.apply(this,arguments)}function ce(){return ce=Object(F["a"])(D.a.mark((function t(e,n){return D.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:ae=e,se=n;case 2:case"end":return t.stop()}}),t)}))),ce.apply(this,arguments)}function oe(t){return ue.apply(this,arguments)}function ue(){return ue=Object(F["a"])(D.a.mark((function t(e){return D.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!ee){t.next=7;break}if(!ne||""!==ae){t.next=6;break}return de(e),t.abrupt("return",Kt.resume().then((function(){Rt.commit("setPlaying",!0)})).catch((function(t){console.log(t)})));case 6:return t.abrupt("return",Dt.play({device_id:ee,uris:[ae],position_ms:e||se}).then((function(){ne=!0,ae,ae="",se=0,Rt.commit("setPlaying",!0)})).catch((function(t){console.log(t)})));case 7:case"end":return t.stop()}}),t)}))),ue.apply(this,arguments)}function le(){return he.apply(this,arguments)}function he(){return he=Object(F["a"])(D.a.mark((function t(){return D.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!ee||!ne){t.next=2;break}return t.abrupt("return",Kt.pause().then((function(){Rt.commit("setPlaying",!1)})).catch((function(t){console.log(t)})));case 2:case"end":return t.stop()}}),t)}))),he.apply(this,arguments)}function de(t){return fe.apply(this,arguments)}function fe(){return fe=Object(F["a"])(D.a.mark((function t(e){return D.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!ee||!ne){t.next=2;break}return t.abrupt("return",Kt.seek(e).catch((function(t){console.log(t)})));case 2:case"end":return t.stop()}}),t)}))),fe.apply(this,arguments)}function me(t){return ge.apply(this,arguments)}function ge(){return ge=Object(F["a"])(D.a.mark((function t(e){return D.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("playing segment",e),oe(1e3*e.start).then((function(){ie=e,window.setTimeout((function(){ie===e&&le()}),1e3*e.duration)}));case 2:case"end":return t.stop()}}),t)}))),ge.apply(this,arguments)}function pe(){return ve.apply(this,arguments)}function ve(){return ve=Object(F["a"])(D.a.mark((function t(){return D.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){var n=new Date,a=setInterval((function(){null!==ee?(console.log("resolved after",new Date-n,"ms"),clearInterval(a),t()):new Date-n>1e4&&(console.log("rejected after",new Date-n,"ms"),clearInterval(a),e())}),20)})));case 1:case"end":return t.stop()}}),t)}))),ve.apply(this,arguments)}function ye(t){Kt&&Kt.setVolume(t)}function ke(){return be.apply(this,arguments)}function be(){return be=Object(F["a"])(D.a.mark((function t(){return D.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("waiting"),t.abrupt("return",new Promise((function(t){window.Spotify?t(window.Spotify):window.onSpotifyWebPlaybackSDKReady=function(){t(window.Spotify)}})));case 2:case"end":return t.stop()}}),t)}))),be.apply(this,arguments)}function we(t,e){return Se.apply(this,arguments)}function Se(){return Se=Object(F["a"])(D.a.mark((function t(e,n){return D.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,ke();case 2:Kt=new window.Spotify.Player({name:"Music Structure Visualizer",getOAuthToken:function(t){t(e)},volume:.5}),Kt.addListener("initialization_error",(function(t){var e=t.message;console.error(e)})),Kt.addListener("authentication_error",(function(t){var e=t.message;console.error(e)})),Kt.addListener("account_error",(function(t){var e=t.message;console.error(e)})),Kt.addListener("playback_error",(function(t){var e=t.message;console.error(e)})),Kt.addListener("player_state_changed",(function(t){var e=t.position,a=t.duration,s=t.track_window.current_track;n({current_track:s,position:e,duration:a})})),Kt.addListener("ready",(function(t){var e=t.device_id;ee=e,console.log("Ready with Device ID",e)})),Kt.addListener("not_ready",(function(t){var e=t.device_id;console.log("Device ID has gone offline",e)})),Kt.connect().then((function(){console.log("Connected succesfully!!!")})).catch((function(t){console.log("Could not connect")}));case 11:case"end":return t.stop()}}),t)}))),Se.apply(this,arguments)}var xe=At["scaleSequential"]().domain([0,1]).interpolator(At["interpolateViridis"]),Ce=xe,je=At["scaleSequential"]().domain([1,0]).interpolator(At["interpolateGreys"]),Oe=At["scaleSequential"]().domain([-1,1]).interpolator(At["interpolateViridis"]),Te=At["scaleSequential"]().domain([0,11]).interpolator(At["interpolateRainbow"]),_e=At["scaleDiverging"]().domain([-1,0,1]).interpolator(At["interpolateRdBu"]);function Ve(t,e,n,a,s,i){var r=n/t.getAnalysis().track.duration;t.getSegments().forEach((function(t){for(var n=0;n<12;n++){var c=e+t.start*r,o=s/12-2,u=a+(11-n)*(o+2),l=t.duration*r;i.fillStyle=Ce(t.segment.pitches[n]),i.fillRect(c,u,l,o)}}))}function Re(t,e,n,a,s,i){var r=n/t.getAnalysis().track.duration;t.getSegments().forEach((function(t,n){var c=e+t.start*r,o=s/3-2,u=a+0*(o+2),l=t.duration*r;i.fillStyle=Ce(2*t.tonalityEnergy-.5),i.fillRect(c,u,l,o),u=a+1*(o+2),i.fillStyle=Ce(1-t.tonalityRadius),i.fillRect(c,u,l,o),u=a+2*(o+2),i.fillStyle=t.duration>.15?Ce(0):Ce(t.percussiony),i.fillRect(c,u,l,o)}))}function Me(t,e,n,a,s,i){var r=n/t.getAnalysis().track.duration;t.getSegments().forEach((function(n,c){for(var o=0;o<12;o++){var u=e+n.start*r,l=s/12-2,h=a+(11-o)*(l+2),d=n.duration*r;i.fillStyle=_e(t.getProcessedTimbre(c)[o]),i.fillRect(u,h,d,l)}}))}function Pe(t,e,n,a,s,i){var r=n/t.getAnalysis().track.duration;t.getBars().forEach((function(t){var n=e+t.start*r,c=a;i.fillStyle=je(.3+t.confidence),i.fillRect(n,c,1,s/3)})),t.getBeats().forEach((function(t){var n=e+t.start*r,c=a+s/3;i.fillStyle=je(.3+t.confidence),i.fillRect(n,c,1,s/3)})),t.getTatums().forEach((function(t){var n=e+t.start*r,c=a+s/3*2;i.fillStyle=je(.3+t.confidence),i.fillRect(n,c,1,s/3)}))}function Ee(t,e,n,a,s,i){var r=n/t.getAnalysis().track.duration;t.getSegments().forEach((function(t){var n=e+t.start*r,c=s,o=a,u=t.duration*r;i.fillStyle=nt(t.pitches),i.fillRect(n,o,u,c)}))}function Ae(t,e,n,a,s,i){console.log("Rendering ssm...");for(var r=s/t.getAnalysis().track.duration,c=t.getSegments().length,o=0;o<c;o++)for(var u=o;u<c;u++){var l=t.getSegment(o),h=t.getSegment(u),d=t.getSSM()[o][u-o][0];i.fillStyle=je(Math.pow(d,4));var f=e+l.start*r,m=l.duration*r,g=a+h.start*r,p=h.duration*r;if(!p)return;i.fillRect(f,g,m,p);var v=t.getSSM()[o][u-o][1];i.fillStyle=je(Math.pow(v,5)),i.fillRect(g+e-a,f-e+a,p,m)}}var De=At["scaleOrdinal"](At["schemeCategory10"]),Fe={props:["padding"],data:function(){return{canvas:null,ctx:null,hover:0,windowWidth:window.innerWidth,spotifyVisualizer:null,power:1,zoomed:!1,scaleX:4,visSpaceBetween:5,drawClusters:!0,canvasVis:{rawPitch:{draw:!0,height:150,function:Ve},percussionPitch:{draw:!1,height:30,function:Re},rawTimbre:{draw:!0,height:150,function:Me},ssm:{draw:!1,height:window.innerWidth-2*this.padding,function:Ae},tonality:{draw:!0,height:25,function:Ee},rawRhythm:{draw:!0,height:30,function:Pe}}}},computed:{track:function(){return this.$store.getters.selectedTrack},analysis:function(){return this.track.getAnalysis()},segments:function(){return this.track.getSegments()},scale:function(){return this.width/this.analysis.track.duration},width:function(){return this.windowWidth*(this.zoomed?this.scaleX:1)-2*this.padding},canvasWidth:function(){return this.windowWidth-2*this.padding},tsneSize:function(){return this.canvasWidth/2},canvasHeight:function(){for(var t=0,e=0,n=Object.entries(this.canvasVis);e<n.length;e++){var a=Object(X["a"])(n[e],2),s=(a[0],a[1]);t+=s.draw?this.visSpaceBetween+s.height:0}return t},loadingTrack:function(){return this.$store.state.loadingTrack},duration:function(){return Math.round(1e3*this.track.getAnalysis().track.duration)},seeker:function(){return this.$store.state.seeker}},watch:{loadingTrack:"loadingTrackChanged",seeker:"seekerChanged",canvasHeight:"canvasHeightChanged",canvasVis:{deep:!0,handler:function(t,e){this.canvasVisChanged(t,e)}}},mounted:function(){var t=this;window.addEventListener("resize",(function(){t.windowWidth=window.innerWidth,t.setupCanvas(document.getElementById("visCanvas")),t.draw(0)})),this.setupCanvas(document.getElementById("visCanvas")),this.draw(0)},methods:{clickedVis:function(t){if(console.log(t),"visCanvas"===t.srcElement.id&&t.offsetY<=this.canvasHeight){var e=Math.min(Math.max(0,t.clientX-this.padding)/this.width,1),n=e*this.duration;this.$store.commit("setSeeker",n),de(n)}},loudness:function(t){return at(t)},pitchColorRange:function(t){return Ce(t)},timbreColorRange:function(t){return Oe(t)},rainbowColorRange:function(t){return Te(t)},clusterColor:function(t){return De(t)},loadingTrackChanged:function(t,e){this.loadingTrack?this.canvasVis.ssm.draw=!1:this.draw(0)},setupCanvas:function(t){if(t){console.log("canvas ready: draw()"),this.canvas=t,this.ctx=t.getContext("2d");t.getBoundingClientRect();this.canvas.width=this.windowWidth*devicePixelRatio,this.canvas.height=this.canvasHeight*devicePixelRatio,this.ctx.scale(devicePixelRatio,devicePixelRatio),this.canvas.style.width=this.windowWidth+"px",this.canvas.style.height=this.canvasHeight+"px",this.ctx.webkitImageSmoothingEnabled=!1,this.ctx.mozImageSmoothingEnabled=!1,this.ctx.imageSmoothingEnabled=!1}else console.log("canvas not ready")},draw:function(t){console.log("draw",t),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);for(var e=0,n=0,a=Object.entries(this.canvasVis);n<a.length;n++){var s=Object(X["a"])(a[n],2),i=(s[0],s[1]);i.draw&&(i.function(this.track,this.padding-t,this.width,e,i.height,this.ctx),e+=this.visSpaceBetween+i.height)}},zoom:function(){console.log("zooming"),this.zoomed=!this.zoomed,this.redraw()},redraw:function(){var t=this.seeker/1e3*this.width/this.analysis.track.duration,e=this.canvasWidth/2;this.draw(this.zoomed?t-e:0)},seekerChanged:function(t,e){this.zoomed&&this.redraw()},transform:function(){this.ctx.save(),this.ctx.translate(.5*this.width,.5*this.canvasHeight),this.ctx.scale(2,2),this.ctx.drawImage(this.canvas,.5*-this.width,.5*-this.canvasHeight),this.ctx.restore()},clickedCluster:function(t,e){console.log("playing cluster",t);var n=this.track.clusters[t].length,a=(Math.floor(Math.random()*n),e);me(a),this.$store.commit("setSeeker",1e3*a.start)},clickedSegment:function(t){me(t),this.$store.commit("setSeeker",1e3*t.start)},clickedTSNE:function(t){var e=t.offsetX/this.tsneSize*2-1,n=t.offsetY/this.tsneSize*2-1,a=this.track.getClosestSegment([e,n]);this.clickedSegment(a)},playingSegment:function(t){return this.$store.getters.playing&&this.seeker/1e3>=t.start&&this.seeker/1e3<t.start+t.duration-.01},canvasHeightChanged:function(t,e){console.log("CanvasHeight change")},canvasVisChanged:function(){this.setupCanvas(this.canvas),this.draw(0)}}},$e=Fe,Ie=(n("8aeb"),n("132d")),Le=n("a722"),ze=n("0fd9"),Be=n("2fa4"),We=n("b73d"),He=Object(o["a"])($e,Zt,te,!1,null,null,null),Ne=He.exports;l()(He,{VBtn:x["a"],VIcon:Ie["a"],VLayout:Le["a"],VRow:ze["a"],VSpacer:Be["a"],VSwitch:We["a"]});var Ge=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"player"},[n("div",{staticClass:"d-flex justify-center pa-4"},[t.$store.state.playerReady?n("div",[n("v-hover",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.hover;return[n("v-btn",{attrs:{elevation:a?5:0,outlined:"",fab:""},on:{click:t.playPause}},[n("v-icon",{attrs:{large:""}},[t._v("mdi-"+t._s(t.playing?"pause":"play"))])],1)]}}],null,!1,2020131878)})],1):t._e(),t.$store.state.playerReady?t._e():n("div",[n("v-progress-circular",{attrs:{indeterminate:"",size:"56"}})],1)]),t.$store.state.loadingTrack?t._e():n("div",{attrs:{id:"timeseeker"}},[n("svg",{staticClass:"waveform",attrs:{height:t.verticalScale},on:{click:t.clickedSVG}},[t._l(t.track.getSegments(),(function(e,a){return n("rect",{key:a,staticClass:"loudnessBlock",attrs:{width:e.duration*t.scale,height:t.loudness(e.loudness_max)*t.verticalScale,x:t.padding+e.start*t.scale,y:t.verticalScale-t.loudness(e.loudness_max)*t.verticalScale,fill:e.start+e.duration/2<t.$store.state.seeker/1e3?"grey":t.baseColor}})})),n("rect",{attrs:{x:t.padding+t.seeker/1e3*t.scale-1,y:0,width:2,height:t.verticalScale,fill:"#1DB954"}})],2)]),t.$store.state.loadingTrack?n("div",[n("v-progress-linear",{attrs:{indeterminate:"",color:"success"}})],1):t._e()])},qe=[],Ue={inject:["theme"],props:["padding"],data:function(){return{verticalScale:50,windowWidth:window.innerWidth,hover:0,ending:!1}},beforeCreate:function(){var t=this;we(P,(function(e){return t.stateChanged(e)})),pe().then((function(){t.$store.commit("playerReady",!0)}))},mounted:function(){},computed:{track:function(){return this.$store.getters.selectedTrack},baseColor:function(){return this.theme.isDark?"white":"black"},scale:function(){return this.$store.getters.loadingTrack?0:this.width/this.track.getAnalysisDuration()},width:function(){return this.windowWidth-2*this.padding},duration:function(){return this.$store.getters.loadingTrack?0:Math.round(1e3*this.track.getAnalysisDuration())},playing:function(){return this.$store.getters.playing},seeker:function(){return this.$store.getters.seeker}},watch:{track:"trackChanged"},methods:{clickedSVG:function(t){var e=Math.min(Math.max(0,t.clientX-this.padding)/this.width,1),n=e*this.duration;this.$store.commit("setSeeker",n),de(this.seeker)},trackChanged:function(t,e){var n=this;this.reset().then((function(){re(n.track.getUri(),0),n.$store.commit("setSeeker",0)}))},resume:function(){var t=this;this.playing||oe(this.seeker).then((function(){t.$store.commit("setPlaying",!0),t.interval=setInterval((function(){return t.seekerTimer(33)}),33)}))},pause:function(){this.playing&&(le(),this.$store.commit("setPlaying",!1),clearInterval(this.interval))},playPause:function(){this.playing?this.pause():this.resume()},reset:function(){var t=this;return Object(F["a"])(D.a.mark((function e(){return D.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.ending=!1,e.abrupt("return",le().then((function(){t.$store.commit("setSeeker",0),clearInterval(t.interval),t.$store.commit("setPlaying",!1)})).catch((function(t){return console.log(t)})));case 2:case"end":return e.stop()}}),e)})))()},clickedTimeSeeker:function(){de(this.seekTime)},seekerTimer:function(t){var e=new Date,n=t;this.lastTimePoll&&(n=e-this.lastTimePoll),this.lastTimePoll=e,this.seekTime+=n,this.$store.state.seeker+=n},loudness:function(t){return at(t)},stateChanged:function(t){if(this.playing){t.current_track;var e=t.position;t.duration;this.$store.commit("setSeeker",e),this.ending&&0===t.position&&this.reset(),!this.ending&&t.duration-t.position<500&&(this.ending=!0)}}},components:{}},Qe=Ue,Xe=(n("6131"),n("ce87")),Je=n("490a"),Ye=n("8e36"),Ke=Object(o["a"])(Qe,Ge,qe,!1,null,null,null),Ze=Ke.exports;l()(Ke,{VBtn:x["a"],VHover:Xe["a"],VIcon:Ie["a"],VProgressCircular:Je["a"],VProgressLinear:Ye["a"]});var tn={name:"Home",data:function(){return{searchQuery:"",volume:.75,prevVolume:.75,padding:50}},computed:{user:function(){return this.$store.getters.user},trackList:function(){return this.$store.getters.trackList},selectedIndex:function(){return this.$store.getters.selectedIndex},selectedTrack:function(){return this.$store.getters.selectedTrack},seeker:function(){return this.$store.getters.seeker}},watch:{selectedIndex:function(t,e){},selectedTrack:function(t,e){console.log("We have ".concat(t.getName()," selected!"))},volume:function(t,e){ye(Math.pow(this.volume,2))}},components:{TrackSelector:Yt,Visualization:Ne,Player:Ze},beforeCreate:function(){$t()},methods:{search:function(){Nt(this.searchQuery)},selectedTrackChanged:function(){console.log("selected track",this.trackList[this.selected].name),this.getAnalsysisFor(this.selected)},getAnalsysisFor:function(t){var e=this.trackList[t].id;this.trackAnalysis.has(e)||(this.analysisReady=!1,console.log("Getting analysis for: ",this.trackList[t].name))},getVolumeIcon:function(t){return t>.6?"mdi-volume-high":t>.2?"mdi-volume-medium":t>0?"mdi-volume-low":"mdi-volume-off"},clickVolume:function(){this.volume>0?(this.prevVolume=this.volume,this.volume=0):this.volume=this.prevVolume}}},en=tn,nn=(n("cccb"),n("40dc")),an=n("a523"),sn=n("ba0d"),rn=n("8654"),cn=n("2a7f"),on=Object(o["a"])(en,g,p,!1,null,null,null),un=on.exports;l()(on,{VAppBar:nn["a"],VBtn:x["a"],VContainer:an["a"],VIcon:Ie["a"],VSlider:sn["a"],VSpacer:Be["a"],VTextField:rn["a"],VToolbarTitle:cn["a"]});var ln=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"callback"})},hn=[],dn=(n("2b3d"),{name:"Callback",components:{},beforeCreate:function(){var t=this,e=new URLSearchParams(window.location.search),n=e.get("code");W(n).then((function(){t.$router.push("/home")}))}}),fn=dn,mn=(n("1aec"),Object(o["a"])(fn,ln,hn,!1,null,null,null)),gn=mn.exports,pn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"login"},[n("v-container",{attrs:{"fill-height":""}},[n("v-layout",{attrs:{"align-center":""}},[n("v-card",{staticClass:"mx-auto elevation-15"},[n("v-card-title",{staticClass:"justify-center"},[t._v("Music Structure Visualizer")]),n("v-card-subtitle",{staticClass:"text-center"},[t._v(" Visualize the structure of music in your own library! ")]),n("v-card-text",{staticClass:"text-center"},[t._v(" Logging in with spotify enables the app to play music using your spotify account. ")]),n("v-card-actions",[n("v-btn",{staticClass:"mx-auto",attrs:{color:"success"},on:{click:t.spotifyAuthorize}},[t._v("Log in with Spotify")])],1)],1)],1)],1)],1)},vn=[],yn={name:"Login",components:{},methods:{spotifyAuthorize:function(){window.location.href="https://music-structure.herokuapp.com/api/spotify/login"}}},kn=yn,bn=(n("d6db"),Object(o["a"])(kn,pn,vn,!1,null,null,null)),wn=bn.exports;l()(bn,{VBtn:x["a"],VCard:C["a"],VCardActions:j["a"],VCardSubtitle:j["b"],VCardText:j["c"],VCardTitle:j["d"],VContainer:an["a"],VLayout:Le["a"]}),a["a"].use(m["a"]);var Sn=[{path:"/",name:"Login",component:wn},{path:"/home",name:"Home",component:un,beforeEnter:function(t,e,n){N()?n():n("/")}},{path:"/callback",name:"Callback",component:gn}],xn=new m["a"]({mode:"history",base:"/",routes:Sn}),Cn=xn,jn=n("f309");a["a"].use(jn["a"]);var On=new jn["a"]({theme:{dark:!0,themes:{light:{primary:"#1DB954",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#1DB954",warning:"#FFC107"},dark:{primary:"#1DB954",success:"#1DB954"}}}});a["a"].config.productionTip=!1,new a["a"]({router:Cn,vuetify:On,store:Rt,render:function(t){return t(f)}}).$mount("#app")},"5ced":function(t,e,n){},6131:function(t,e,n){"use strict";var a=n("2f67"),s=n.n(a);s.a},"6e94":function(t,e,n){},"85ec":function(t,e,n){},"8ade":function(t,e,n){"use strict";var a=n("9bd1"),s=n.n(a);s.a},"8aeb":function(t,e,n){"use strict";var a=n("6e94"),s=n.n(a);s.a},"9bd1":function(t,e,n){},cccb:function(t,e,n){"use strict";var a=n("5ced"),s=n.n(a);s.a},d6db:function(t,e,n){"use strict";var a=n("e67a"),s=n.n(a);s.a},d917:function(t,e,n){},e67a:function(t,e,n){}});
//# sourceMappingURL=app.24aec1b5.js.map